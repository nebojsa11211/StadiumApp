{
  "_Configuration_Note": "This file contains placeholders (e.g., {JWT_SECRET_KEY}) that are replaced with environment variables at runtime. See ENVIRONMENT_VARIABLES.md for setup instructions.",
  "ConnectionStrings": {
    "DefaultConnection": "Host={DB_HOST};Port={DB_PORT};Database={DB_NAME};Username={DB_USERNAME};Password={DB_PASSWORD};Ssl Mode=Require;Connection Timeout=120;Command Timeout=600;Keepalive=60;Connection Idle Lifetime=600;Maximum Pool Size=20;Minimum Pool Size=2;Pooling=true;No Reset On Close=true;Include Error Detail=true;Read Buffer Size=8192;Write Buffer Size=8192;Socket Receive Buffer Size=8192;Socket Send Buffer Size=8192"
  },
  "Supabase": {
    "Url": "{SUPABASE_URL}",
    "Key": "{SUPABASE_API_KEY}",
    "ServiceKey": "{SUPABASE_SERVICE_KEY}"
  },
  "JwtSettings": {
    "SecretKey": "{JWT_SECRET_KEY}",
    "Issuer": "{JWT_ISSUER}",
    "Audience": "{JWT_AUDIENCE}"
  },
  "StripeSettings": {
    "PublishableKey": "{STRIPE_PUBLISHABLE_KEY}",
    "SecretKey": "{STRIPE_SECRET_KEY}",
    "WebhookSecret": "{STRIPE_WEBHOOK_SECRET}",
    "Currency": "eur"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Npgsql": "Information"
    },
    "Database": {
      "Enabled": true,
      "MinLevel": "Information",
      "BatchingEnabled": true,
      "ExcludeCategories": [
        "Microsoft.EntityFrameworkCore",
        "Microsoft.AspNetCore.Hosting",
        "Microsoft.AspNetCore.Routing",
        "Microsoft.AspNetCore.Mvc",
        "Microsoft.AspNetCore.Authorization",
        "System.Net.Http.HttpClient"
      ],
      "CriticalCategories": [
        "Security",
        "Authentication",
        "Authorization",
        "Payment"
      ]
    }
  },
  "AllowedHosts": "*",
  "LogRetention": {
    "RetentionDays": 30,
    "ArchiveCriticalLogs": true,
    "EnableVacuum": false
  },
  "RateLimiting": {
    "EnableRateLimiting": true,
    "Authentication": {
      "LoginAttemptsPerMinute": 5,
      "RegisterAttemptsPerHour": 3,
      "TimeWindowSeconds": 60,
      "RetryAfterSeconds": 60
    },
    "General": {
      "RequestsPerMinute": 100,
      "AuthenticatedRequestsPerMinute": 200
    },
    "BruteForce": {
      "MaxFailedAttempts": 5,
      "LockoutDurationMinutes": 15,
      "MaxFailedAttemptsPerIP": 20,
      "IPBanDurationMinutes": 60,
      "ProgressiveDelay": {
        "Enabled": true,
        "BaseDelayMs": 1000,
        "MaxDelayMs": 30000,
        "Multiplier": 2.0
      }
    }
  },
  "IpRateLimiting": {
    "EnableEndpointRateLimiting": true,
    "StackBlockedRequests": false,
    "RealIpHeader": "X-Real-IP",
    "ClientIdHeader": "X-ClientId",
    "HttpStatusCode": 429,
    "GeneralRules": [
      {
        "Endpoint": "*:/auth/login",
        "Period": "1m",
        "Limit": 5
      },
      {
        "Endpoint": "*:/auth/register",
        "Period": "1h",
        "Limit": 3
      },
      {
        "Endpoint": "*:/*",
        "Period": "1m",
        "Limit": 100
      },
      {
        "Endpoint": "*",
        "Period": "15m",
        "Limit": 1000
      }
    ]
  },
  "IpRateLimitPolicies": {
    "IpRules": [
      {
        "Ip": "127.0.0.1",
        "Rules": [
          {
            "Endpoint": "*",
            "Period": "1m",
            "Limit": 1000
          }
        ]
      }
    ]
  },
  "SecurityHeaders": {
    "XFrameOptions": {
      "Enabled": true,
      "Value": "DENY"
    },
    "XContentTypeOptions": {
      "Enabled": true
    },
    "XXSSProtection": {
      "Enabled": true,
      "Value": "1; mode=block"
    },
    "ReferrerPolicy": {
      "Enabled": true,
      "Value": "strict-origin-when-cross-origin"
    },
    "ContentSecurityPolicy": {
      "Enabled": true,
      "Value": "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self'"
    },
    "StrictTransportSecurity": {
      "Enabled": true,
      "Value": "max-age=31536000; includeSubDomains"
    },
    "PermissionsPolicy": {
      "Enabled": true,
      "Value": "geolocation=(), microphone=(), camera=()"
    },
    "XPermittedCrossDomainPolicies": {
      "Enabled": true,
      "Value": "none"
    },
    "CacheControl": {
      "Enabled": true,
      "Value": "no-cache, no-store, must-revalidate"
    },
    "RemoveServerHeader": true,
    "CustomHeaders": {}
  }
}
