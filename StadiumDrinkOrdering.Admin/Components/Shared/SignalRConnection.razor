@using Microsoft.AspNetCore.SignalR.Client
@implements IAsyncDisposable
@inherits SignalRConnectionBase

@if (_connectionStatus == "Connected")
{
    <div class="connection-status @(_connectionStatus.ToLower())" title="SignalR Connection: @_connectionStatus">
        <span class="connection-indicator connected"></span>
        <span class="connection-text">Live Updates</span>
        <span class="badge badge-primary ms-2">@_activeConnections online</span>
    </div>
}
else if (_connectionStatus == "Connecting" || _connectionStatus == "Reconnecting")
{
    <div class="connection-status @(_connectionStatus.ToLower())" title="SignalR Connection: @_connectionStatus">
        <span class="connection-indicator connecting"></span>
        <span class="connection-text">Connecting...</span>
    </div>
}
@* Hide disconnected/failed status to avoid visual clutter *@


<style>
    .connection-status {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.25rem;
        border-radius: var(--stadium-radius);
        font-size: 0.9375rem;
        font-weight: 500;
        transition: all 0.2s ease;
        background: white;
        border: 1px solid var(--stadium-gray-200);
        box-shadow: var(--stadium-shadow-sm);
        min-height: 48px;
    }

    .connection-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        flex-shrink: 0;
    }

    .connection-indicator.connected {
        background: var(--admin-primary);
        box-shadow: 0 0 12px rgba(124, 58, 237, 0.4);
    }

    .connection-indicator.connecting {
        background: var(--stadium-warning);
        animation: pulse 2s infinite;
    }

    .connection-indicator.disconnected {
        background: var(--stadium-danger);
    }

    .connection-status.connected {
        color: var(--admin-primary);
        border-color: rgba(124, 58, 237, 0.2);
    }

    .connection-status.connecting,
    .connection-status.reconnecting {
        color: var(--stadium-warning);
        border-color: rgba(245, 158, 11, 0.2);
    }

    .connection-status.disconnected,
    .connection-status.failed {
        color: var(--stadium-danger);
        border-color: rgba(239, 68, 68, 0.2);
    }

    @@media (max-width: 768px) {
        .connection-status {
            padding: 0.75rem;
            font-size: 0.875rem;
            gap: 0.5rem;
        }
        
        .badge {
            font-size: 0.75rem;
        }
    }
</style>